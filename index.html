<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="style.css" />
    <title>Roommate Rent Calculator</title>
  </head>
  <body>
    <h1>Roommate Rent Calculator: Finally, it's Gil's idea!</h1>

    <p>The total rent for the apartment is $4712 and there are 3 rooms: master, child, flex.</p>
    <p>Enter the price you would be willing to pay for each room.</p>
  <!--
    <form id="userInput">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name"><br>
        <label for="master">Master Bedroom:</label>
        <input type="number" id="master" name="master" min="0" max="4712">
        <label for="child">Child Bedroom:</label>
        <input type="number" id="child" name="child" min="0" max="4712">
        <label for="flex">Flex Bedroom:</label>
        <input type="number" id="flex" name="flex" min="0" max="4712">
        <input type="submit">
    </form><br>
-->
    <form id="calcTableForm">
    <table id="calcTable">
        <tr>
          <th>Name</th>
          <th>Master</th>
          <th>Child</th>
          <th>Flex</th>
        </tr>
        <tr>
          <td>
            <input type="text" id="name1" name="name1">
          </td>
          <td>
            <input type="text" id="master1" name="master1">
          </td>
          <td>
            <input type="text" id="child1" name="child1">
          </td>
          <td>
            <input type="text" id="flex1" name="flex1">
          </td>
        </tr>
        <tr>
          <td>
            <input type="text" id="name2" name="name2">
          </td>
          <td>
            <input type="text" id="master2" name="master2">
          </td>
          <td>
            <input type="text" id="child2" name="child2">
          </td>
          <td>
            <input type="text" id="flex2" name="flex2">
          </td>
        </tr>
        <tr>
          <td>
            <input type="text" id="name3" name="name3">
          </td>
          <td>
            <input type="text" id="master3" name="master3">
          </td>
          <td>
            <input type="text" id="child3" name="child3">
          </td>
          <td>
            <input type="text" id="flex3" name="flex3">
          </td>
        </tr>
        <tr>
            <td>Average</td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
      </table>
      <br><input type="submit">
      </form>

    <!--
    <table id="calcTable">
        <tr>
          <th>Name</th>
          <th>Master</th>
          <th>Child</th>
          <th>Flex</th>
        </tr>
        <tr>
          <td>Name1</td>
          <td>Master1</td>
          <td>Child1</td>
          <td>Flex1</td>
        </tr>
        <tr>
          <td>Name2</td>
          <td>Master2</td>
          <td>Child2</td>
          <td>Flex2</td>
        </tr>
        <tr>
          <td>Name3</td>
          <td>Master3</td>
          <td>Child3</td>
          <td>Flex3</td>
        </tr>
      </table>
    -->

    <script>
        //const userInput = document.getElementById("userInput");
        let obj;

        const calcTable = document.getElementById("calcTable");
        const tableRows = document.querySelector("table").rows; //this is an array of the row arrays
        
        const sample = document.createElement("h2");
        document.querySelector("body").appendChild(sample);
        calcTableForm.addEventListener('submit', function (e) {
            e.preventDefault();
            const fd = new FormData(calcTableForm);
            
            obj = Object.fromEntries(fd);
            console.log(obj);

            sample.textContent = "The page was submitted.";



            //add something about adding entries to table - calcTable
            //tableRows[1].cells[0].textContent = obj.name;
            //tableRows[1].cells[1].textContent = obj.master;
            //tableRows[1].cells[2].textContent = obj.child;
            //tableRows[1].cells[3].textContent = obj.flex 
            
            const averageMaster = (parseInt(obj.master1,10) + parseInt(obj.master2,10) + parseInt(obj.master3,10)) / 3;
            const averageChild = (parseInt(obj.child1,10) + parseInt(obj.child2,10) + parseInt(obj.child3,10)) / 3;
            const averageFlex = (parseInt(obj.flex1,10) + parseInt(obj.flex2,10) + parseInt(obj.flex3,10)) / 3; 
            
            tableRows[4].cells[1].textContent = averageMaster.toFixed(2);
            tableRows[4].cells[2].textContent = averageChild.toFixed(2);
            tableRows[4].cells[3].textContent = averageFlex.toFixed(2);              
            
        })

    </script>

    <!--<script src="script.js"></script> --> 

  </body>
</html>